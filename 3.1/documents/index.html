
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kotlin Multiplatform library for Couchbase Liteâ€”a lightweight, embedded, syncable, NoSQL database">
      
      
        <meta name="author" content="Jeff Lockhart">
      
      
        <link rel="canonical" href="https://kotbase.dev/current/documents/">
      
      
        <link rel="prev" href="../scopes-and-collections/">
      
      
        <link rel="next" href="../blobs/">
      
      
      <link rel="icon" href="../assets/images/couchbase-logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Documents - Kotbase</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--link:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>');--md-admonition-icon--important:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 6a6 6 0 0 1 6 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-1.8c-1.79-1.04-3-2.98-3-5.2a6 6 0 0 1 6-6m2 15v1a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-1zm6-10h3v2h-3zM1 11h3v2H1zM13 1v3h-2V1zM4.92 3.5l2.13 2.14-1.42 1.41L3.5 4.93zm12.03 2.13 2.12-2.13 1.43 1.43-2.13 2.12z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"DM Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/permalink.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-QFS8SG5ZKD"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-QFS8SG5ZKD",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-QFS8SG5ZKD",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kotbase" class="md-header__button md-logo" aria-label="Kotbase" data-md-component="logo">
      
  <img src="../assets/images/couchbase-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kotbase
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Documents
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jeffdgr8/kotbase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Kotbase
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../databases/" class="md-tabs__link">
          
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../api" target="_blank" class="md-tabs__link">
        
  
    
  
  API Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kotbase" class="md-nav__button md-logo" aria-label="Kotbase" data-md-component="logo">
      
  <img src="../assets/images/couchbase-logo.svg" alt="logo">

    </a>
    Kotbase
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jeffdgr8/kotbase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Kotbase
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotbase
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Differences from Java SDK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../platforms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported Platforms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build and Run
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Extension Libraries
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Extension Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ktx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KTX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kermit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kermit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../paging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Paging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../databases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-built Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scopes-and-collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scopes and Collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Documents
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Documents
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Document Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Data Encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Data Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    <span class="md-ellipsis">
      JSON
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constructing-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Constructing a Document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructing a Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-a-database" class="md-nav__link">
    <span class="md-ellipsis">
      Open a Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-dictionary" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Dictionary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-array" class="md-nav__link">
    <span class="md-ellipsis">
      Create an Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Populate a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Save a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Close the Database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checking-a-documents-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Checking a Documentâ€™s Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date-accessors" class="md-nav__link">
    <span class="md-ellipsis">
      Date accessors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Using Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Using Arrays
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-blobs" class="md-nav__link">
    <span class="md-ellipsis">
      Using Blobs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-initializers" class="md-nav__link">
    <span class="md-ellipsis">
      Document Initializers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutability" class="md-nav__link">
    <span class="md-ellipsis">
      Mutability
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#batch-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Batch operations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-change-events" class="md-nav__link">
    <span class="md-ellipsis">
      Document change events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document change events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-kotlin-flows" class="md-nav__link">
    <span class="md-ellipsis">
      Using Kotlin Flows
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-expiration" class="md-nav__link">
    <span class="md-ellipsis">
      Document Expiration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Document Constraints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-json-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with JSON Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with JSON Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Arrays
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blobs" class="md-nav__link">
    <span class="md-ellipsis">
      Blobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documents" class="md-nav__link">
    <span class="md-ellipsis">
      Documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-results-as-json" class="md-nav__link">
    <span class="md-ellipsis">
      Query Results as JSON
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Results as JSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-string-format" class="md-nav__link">
    <span class="md-ellipsis">
      JSON String Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Query
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Query
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-builder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QueryBuilder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n1ql-query-strings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQL++ Query Strings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n1ql-server-differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQL++ Server Differences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n1ql-query-builder-differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQL++ QueryBuilder Differences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-result-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Result Sets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../live-queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../full-text-search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Text Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indexing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Sync
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Data Sync
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote-sync-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Sync Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intra-device-sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intra-device Sync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_3" >
        
          
          <label class="md-nav__link" for="__nav_3_9_3" id="__nav_3_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Peer-to-Peer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_3">
            <span class="md-nav__icon md-icon"></span>
            Peer-to-Peer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../peer-to-peer-sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peer-to-Peer Sync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../passive-peer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passive Peer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../active-peer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Active Peer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrate-custom-listener/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate Custom Listener
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handling-data-conflicts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handling Data Conflicts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kotlin-extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin Extensions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api" target="_blank" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Document Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Data Encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Data Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    <span class="md-ellipsis">
      JSON
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constructing-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Constructing a Document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructing a Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-a-database" class="md-nav__link">
    <span class="md-ellipsis">
      Open a Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-dictionary" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Dictionary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-array" class="md-nav__link">
    <span class="md-ellipsis">
      Create an Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Populate a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save-a-document" class="md-nav__link">
    <span class="md-ellipsis">
      Save a Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Close the Database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checking-a-documents-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Checking a Documentâ€™s Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date-accessors" class="md-nav__link">
    <span class="md-ellipsis">
      Date accessors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Using Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Using Arrays
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-blobs" class="md-nav__link">
    <span class="md-ellipsis">
      Using Blobs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-initializers" class="md-nav__link">
    <span class="md-ellipsis">
      Document Initializers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutability" class="md-nav__link">
    <span class="md-ellipsis">
      Mutability
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#batch-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Batch operations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-change-events" class="md-nav__link">
    <span class="md-ellipsis">
      Document change events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document change events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-kotlin-flows" class="md-nav__link">
    <span class="md-ellipsis">
      Using Kotlin Flows
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-expiration" class="md-nav__link">
    <span class="md-ellipsis">
      Document Expiration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Document Constraints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-json-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with JSON Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with JSON Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Arrays
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blobs" class="md-nav__link">
    <span class="md-ellipsis">
      Blobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documents" class="md-nav__link">
    <span class="md-ellipsis">
      Documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-results-as-json" class="md-nav__link">
    <span class="md-ellipsis">
      Query Results as JSON
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Results as JSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-string-format" class="md-nav__link">
    <span class="md-ellipsis">
      JSON String Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Documents</h1>

<p><em>Couchbase Lite concepts â€” Data model â€” Documents</em></p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link"></a></h2>
<h3 id="document-structure">Document Structure<a class="headerlink" href="#document-structure" title="Permanent link"></a></h3>
<p>In <em>Couchbase Lite</em> the term 'document' refers to an entry in the database. You can compare it to a record, or a row in
a table.</p>
<p>Each document has an ID or unique identifier. This ID is similar to a primary key in other databases.</p>
<p>You can specify the ID programmatically. If you omit it, it will be automatically generated as a UUID.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Couchbase documents are assigned to a <a href="../databases/#database-concepts">Collection</a>. The ID of a document must be
unique within the Collection it is written to. You cannot change it after you have written the document.</p>
</div>
<p>The document also has a value which contains the actual application data. This value is stored as a dictionary of
key-value (k-v) pairs. The values can be made of up several different <a href="#data-types">Data Types</a> such as numbers,
strings, arrays, and nested objects.</p>
<h3 id="data-encoding">Data Encoding<a class="headerlink" href="#data-encoding" title="Permanent link"></a></h3>
<p>The document body is stored in an internal, efficient, binary form called <a href="https://github.com/couchbase/fleece#readme">Fleece</a>. This internal form can be easily converted into a manageable native
dictionary format for manipulation in applications.</p>
<p>Fleece data is stored in the smallest format that will hold the value whilst maintaining the integrity of the value.</p>
<h3 id="data-types">Data Types<a class="headerlink" href="#data-types" title="Permanent link"></a></h3>
<p>The <code>Document</code> class offers a set of property accessors for various scalar types, such as:</p>
<ul>
<li>Boolean</li>
<li>Date</li>
<li>Double</li>
<li>Float</li>
<li>Int</li>
<li>Long</li>
<li>String</li>
</ul>
<p>These accessors take care of converting to/from JSON encoding, and make sure you get the type you expect.</p>
<p>In addition to these basic data types Couchbase Lite provides for the following:</p>
<ul>
<li><strong>Dictionary</strong> represents a read-only key-value pair collection</li>
<li><strong>MutableDictionary</strong> represents a writeable key-value pair collection</li>
<li><strong>Array</strong> represents a readonly ordered collection of objects</li>
<li><strong>MutableArray</strong> represents a writeable collection of objects</li>
<li><strong>Blob</strong> represents an arbitrary piece of binary data</li>
</ul>
<h3 id="json">JSON<a class="headerlink" href="#json" title="Permanent link"></a></h3>
<p>Couchbase Lite also provides for the direct handling of JSON data implemented in most cases by the provision of a
<code>toJSON()</code> method on appropriate API classes (for example, on <code>MutableDocument</code>, <code>Dictionary</code>, <code>Blob</code>, and <code>Array</code>) â€”
see <a href="#working-with-json-data">Working with JSON Data</a>.</p>
<h2 id="constructing-a-document">Constructing a Document<a class="headerlink" href="#constructing-a-document" title="Permanent link"></a></h2>
<p>An individual document often represents a single instance of an object in application code.</p>
<p>You can consider a document as the equivalent of a 'row' in a relational table, with each of the documentâ€™s attributes
being equivalent to a 'column'.</p>
<p>Documents can contain nested structures. This allows developers to express many-to-many relationships without requiring
a reference or join table, and is naturally expressive of hierarchical data.</p>
<p>Most apps will work with one or more documents, persisting them to a local database and optionally syncing them, either
centrally or to the cloud.</p>
<p>In this section we provide an example of how you might create a <code>hotel</code> document, which provides basic contact details and
price data.</p>
<div class="language-text highlight"><span class="filename">Data Model</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>hotel: {
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  type: string (value = `hotel`)
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  name: string
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  address: dictionary {
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    street: string
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    city: string
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    state: string
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    country: string
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    code: string
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>  }
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  phones: array
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>  rate: float
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>}
</span></code></pre></div>
<h3 id="open-a-database">Open a Database<a class="headerlink" href="#open-a-database" title="Permanent link"></a></h3>
<p>First open your database. If the database does not already exist, Couchbase Lite will create it for you.</p>
<p>Couchbase documents are assigned to a <a href="../databases/#database-concepts">Collection</a>. All the CRUD examples in this
document operate on a <code>collection</code> object.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// Get the database (and create it if it doesnâ€™t exist).</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DatabaseConfiguration</span><span class="p">()</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">config</span><span class="p">.</span><span class="na">directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/db&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Database</span><span class="p">(</span><span class="s">&quot;getting-started&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">collection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database</span><span class="p">.</span><span class="na">getCollection</span><span class="p">(</span><span class="s">&quot;myCollection&quot;</span><span class="p">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="o">?:</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;collection not found&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>See <a href="../databases/">Databases</a> for more information</p>
<h3 id="create-a-document">Create a Document<a class="headerlink" href="#create-a-document" title="Permanent link"></a></h3>
<p>Now create a new document to hold your applicationâ€™s data.</p>
<p>Use the mutable form, so that you can add data to the document.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Create your new document</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">()</span>
</span></code></pre></div>
<p>For more on using <strong>Documents</strong>, see <a href="#document-initializers">Document Initializers</a> and <a href="#mutability">Mutability</a>.</p>
<h3 id="create-a-dictionary">Create a Dictionary<a class="headerlink" href="#create-a-dictionary" title="Permanent link"></a></h3>
<p>Now create a mutable dictionary (<code>address</code>).</p>
<p>Each element of the dictionary value will be directly accessible via its own key.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Create and populate mutable dictionary</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1">// Create a new mutable dictionary and populate some keys/values</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDictionary</span><span class="p">()</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">address</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;street&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1 Main st.&quot;</span><span class="p">)</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">address</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;city&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;San Francisco&quot;</span><span class="p">)</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">address</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;state&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">)</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="n">address</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;country&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;USA&quot;</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="n">address</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;code&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;90210&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Kotbase <a href="../ktx/#collection-creation-functions">KTX extensions</a> provide an idiomatic <code>MutableDictionary</code> creation
function:</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableDictOf</span><span class="p">(</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="s">&quot;street&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;1 Main st.&quot;</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="s">&quot;city&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;San Francisco&quot;</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="s">&quot;state&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="s">&quot;country&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;USA&quot;</span><span class="p">,</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="s">&quot;code&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;90210&quot;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Learn more about <a href="#using-dictionaries">Using Dictionaries</a>.</p>
<h3 id="create-an-array">Create an Array<a class="headerlink" href="#create-an-array" title="Permanent link"></a></h3>
<p>Since the hotel may have multiple contact numbers, provide a field (<code>phones</code>) as a mutable array.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// Create and populate mutable array</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">phones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableArray</span><span class="p">()</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">phones</span><span class="p">.</span><span class="na">addString</span><span class="p">(</span><span class="s">&quot;650-000-0000&quot;</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">phones</span><span class="p">.</span><span class="na">addString</span><span class="p">(</span><span class="s">&quot;650-000-0001&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Kotbase <a href="../ktx/#collection-creation-functions">KTX extensions</a> provide an idiomatic <code>MutableArray</code> creation
function:</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">phones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableArrayOf</span><span class="p">(</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="s">&quot;650-000-0000&quot;</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="s">&quot;650-000-0001&quot;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Learn more about <a href="#using-arrays">Using Arrays</a>.</p>
<h3 id="populate-a-document">Populate a Document<a class="headerlink" href="#populate-a-document" title="Permanent link"></a></h3>
<p>Now add your data to the mutable document created earlier. Each data item is stored as a key-value pair.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">// Initialize and populate the document</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1">// Add document type to document properties </span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hotel&quot;</span><span class="p">)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1">// Add hotel name string to document properties </span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hotel Java Mo&quot;</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="c1">// Add float to document properties </span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setFloat</span><span class="p">(</span><span class="s">&quot;room_rate&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">121.75f</span><span class="p">)</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="c1">// Add dictionary to document&#39;s properties </span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setDictionary</span><span class="p">(</span><span class="s">&quot;address&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">)</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="c1">// Add array to document&#39;s properties </span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setArray</span><span class="p">(</span><span class="s">&quot;phones&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">phones</span><span class="p">)</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Couchbase recommends using a type attribute to define each logical document type.</p>
</div>
<h3 id="save-a-document">Save a Document<a class="headerlink" href="#save-a-document" title="Permanent link"></a></h3>
<p>Now persist the populated document to your Couchbase Lite database. This will auto-generate the document id.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Save the document changes </span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">mutableDoc</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="close-the-database">Close the Database<a class="headerlink" href="#close-the-database" title="Permanent link"></a></h3>
<p>With your document saved, you can now close our Couchbase Lite database.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Close the database </span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">database</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
</span></code></pre></div>
<h2 id="working-with-data">Working with Data<a class="headerlink" href="#working-with-data" title="Permanent link"></a></h2>
<h3 id="checking-a-documents-properties">Checking a Documentâ€™s Properties<a class="headerlink" href="#checking-a-documents-properties" title="Permanent link"></a></h3>
<p>To check whether a given property exists in the document, use the <a href="/api/couchbase-lite-ee/kotbase/-document/contains.html"><code>Document.contains(key: String)</code></a> method.</p>
<p>If you try to access a property which doesnâ€™t exist in the document, the call will return the default value for that
getter method (0 for <a href="/api/couchbase-lite-ee/kotbase/-document/get-int.html"><code>Document.getInt()</code></a>, 0.0 for
<a href="/api/couchbase-lite-ee/kotbase/-document/get-float.html"><code>Document.getFloat()</code></a>, etc.).</p>
<h3 id="date-accessors">Date accessors<a class="headerlink" href="#date-accessors" title="Permanent link"></a></h3>
<p>Couchbase Lite offers <em>Date</em> accessors as a convenience. Dates are a common data type, but JSON doesnâ€™t natively support
them, so the convention is to store them as strings in ISO-8601 format.</p>
<div class="admonition example">
<p class="admonition-title">Example 1. Date Getter</p>
<p>This example sets the date on the <code>createdAt</code> property and reads it back using the <a href="/api/couchbase-lite-ee/kotbase/-document/get-date.html"><code>Document.getDate()</code></a> accessor method.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">doc</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;createdAt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Clock</span><span class="p">.</span><span class="na">System</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="na">getDate</span><span class="p">(</span><span class="s">&quot;createdAt&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="using-dictionaries">Using Dictionaries<a class="headerlink" href="#using-dictionaries" title="Permanent link"></a></h3>
<p><strong>API References</strong></p>
<ul>
<li><a href="/api/couchbase-lite-ee/kotbase/-dictionary/">Dictionary</a></li>
<li><a href="/api/couchbase-lite-ee/kotbase/-mutable-dictionary/">MutableDictionary</a></li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example 2. Read Only</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// NOTE: No error handling, for brevity (see getting started)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="s">&quot;doc1&quot;</span><span class="p">)</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1">// Getting a dictionary from the document&#39;s properties</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">?.</span><span class="na">getDictionary</span><span class="p">(</span><span class="s">&quot;address&quot;</span><span class="p">)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="c1">// Access a value with a key from the dictionary</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="kd">val</span><span class="w"> </span><span class="nv">street</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dict</span><span class="o">?.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;street&quot;</span><span class="p">)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="c1">// Iterate dictionary</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="n">dict</span><span class="o">?.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Key </span><span class="si">$</span><span class="n">key</span><span class="s"> = </span><span class="si">${</span><span class="n">dict</span><span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="p">}</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="c1">// Create a mutable copy</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dict</span><span class="o">?.</span><span class="na">toMutable</span><span class="p">()</span>
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example 3. Mutable</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">// NOTE: No error handling, for brevity (see getting started)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="c1">// Create a new mutable dictionary and populate some keys/values</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDictionary</span><span class="p">()</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">mutableDict</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;street&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1 Main st.&quot;</span><span class="p">)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="n">mutableDict</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;city&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;San Francisco&quot;</span><span class="p">)</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1">// Add the dictionary to a document&#39;s properties and save the document</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">(</span><span class="s">&quot;doc1&quot;</span><span class="p">)</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setDictionary</span><span class="p">(</span><span class="s">&quot;address&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mutableDict</span><span class="p">)</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">mutableDoc</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="using-arrays">Using Arrays<a class="headerlink" href="#using-arrays" title="Permanent link"></a></h3>
<p><strong>API References</strong></p>
<ul>
<li><a href="/api/couchbase-lite-ee/kotbase/-array/">Array</a></li>
<li><a href="/api/couchbase-lite-ee/kotbase/-mutable-array/">MutableArray</a></li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example 4. Read Only</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">// NOTE: No error handling, for brevity (see getting started)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="s">&quot;doc1&quot;</span><span class="p">)</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1">// Getting a phones array from the document&#39;s properties</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">?.</span><span class="na">getArray</span><span class="p">(</span><span class="s">&quot;phones&quot;</span><span class="p">)</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="c1">// Get element count</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="kd">val</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">?.</span><span class="na">count</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="c1">// Access an array element by index</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="kd">val</span><span class="w"> </span><span class="nv">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">?.</span><span class="na">getString</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="c1">// Iterate array</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="n">array</span><span class="o">?.</span><span class="na">forEachIndexed</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Row </span><span class="si">$</span><span class="n">index</span><span class="s"> = </span><span class="si">$</span><span class="n">item</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="p">}</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="c1">// Create a mutable copy</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">?.</span><span class="na">toMutable</span><span class="p">()</span>
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example 5. Mutable</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1">// NOTE: No error handling, for brevity (see getting started)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="c1">// Create a new mutable array and populate data into the array</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableArray</span><span class="p">()</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">mutableArray</span><span class="p">.</span><span class="na">addString</span><span class="p">(</span><span class="s">&quot;650-000-0000&quot;</span><span class="p">)</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="n">mutableArray</span><span class="p">.</span><span class="na">addString</span><span class="p">(</span><span class="s">&quot;650-000-0001&quot;</span><span class="p">)</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1">// Set the array to document&#39;s properties and save the document</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mutableDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">(</span><span class="s">&quot;doc1&quot;</span><span class="p">)</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">mutableDoc</span><span class="p">.</span><span class="na">setArray</span><span class="p">(</span><span class="s">&quot;phones&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mutableArray</span><span class="p">)</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">mutableDoc</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="using-blobs">Using Blobs<a class="headerlink" href="#using-blobs" title="Permanent link"></a></h3>
<p>For more on working with blobs, see <a href="../blobs/">Blobs</a>.</p>
<h2 id="document-initializers">Document Initializers<a class="headerlink" href="#document-initializers" title="Permanent link"></a></h2>
<p>You can use the following methods/initializers:</p>
<ul>
<li>Use the <a href="/api/couchbase-lite-ee/kotbase/-mutable-document/-mutable-document.html"><code>MutableDocument()</code></a> initializer to
  create a new document where the document ID is randomly generated by the database.</li>
<li>Use the <a href="/api/couchbase-lite-ee/kotbase/-mutable-document/-mutable-document.html"><code>MutableDocument(id: String?)</code></a>
  initializer to create a new document with a specific ID.</li>
<li>Use the <a href="/api/couchbase-lite-ee/kotbase/-collection/get-document.html"><code>Collection.getDocument()</code></a> method to get a
  document. If the document doesnâ€™t exist in the collection, the method will return <code>null</code>. You can use this behavior to
  check if a document with a given ID already exists in the collection.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example 6. Persist a document</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">()</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">doc</span><span class="p">.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="n">setString</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;task&quot;</span><span class="p">)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="n">setString</span><span class="p">(</span><span class="s">&quot;owner&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;todo&quot;</span><span class="p">)</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">    </span><span class="n">setDate</span><span class="p">(</span><span class="s">&quot;createdAt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Clock</span><span class="p">.</span><span class="na">System</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="p">}</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Kotbase <a href="../ktx/#document-builder-dsl">KTX extensions</a> provide a document builder DSL:</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;task&quot;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="s">&quot;owner&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;todo&quot;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Clock</span><span class="p">.</span><span class="na">System</span><span class="p">.</span><span class="na">now</span><span class="p">()</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="p">}</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">database</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h2 id="mutability">Mutability<a class="headerlink" href="#mutability" title="Permanent link"></a></h2>
<p>By default, a document is immutable when it is read from the database. Use <a href="/api/couchbase-lite-ee/kotbase/-document/to-mutable.html"><code>Document.toMutable()</code></a> to create an updatable instance of the document.</p>
<div class="admonition example">
<p class="admonition-title">Example 7. Make a mutable document</p>
<p>Changes to the document are persisted to the database when the <code>save</code> method is called.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="s">&quot;xyz&quot;</span><span class="p">)</span><span class="o">?.</span><span class="na">toMutable</span><span class="p">()</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="nb">it</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;apples&quot;</span><span class="p">)</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="nb">it</span><span class="p">)</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any user change to the value of reserved keys (<code>_id</code>, <code>_rev</code>, or <code>_deleted</code>) will be detected when a document is
saved and will result in an exception (Error Code 5 â€” <code>CorruptRevisionData</code>) â€” see also <a href="#document-constraints">Document
Constraints</a>.</p>
</div>
<h2 id="batch-operations">Batch operations<a class="headerlink" href="#batch-operations" title="Permanent link"></a></h2>
<p>If youâ€™re making multiple changes to a database at once, itâ€™s faster to group them together. The following example
persists a few documents in batch.</p>
<div class="admonition example">
<p class="admonition-title">Example 8. Batch operations</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">database</span><span class="p">.</span><span class="na">inBatch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0.</span><span class="p">.</span><span class="m">9</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">()</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">        </span><span class="n">doc</span><span class="p">.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">            </span><span class="n">setValue</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">)</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">            </span><span class="n">setValue</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user </span><span class="si">$</span><span class="n">i</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">            </span><span class="n">setBoolean</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;saved user document: </span><span class="si">${</span><span class="n">doc</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;</span><span class="n">name</span><span class="s">&quot;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<p>At the <em>local</em> level this operation is still transactional: no other <code>Database</code> instances, including ones managed by the
replicator, can make changes during the execution of the block, and other instances will not see partial changes. But
Couchbase Mobile is a distributed system, and due to the way replication works, thereâ€™s no guarantee that Sync Gateway
or other devices will receive your changes all at once.</p>
<h2 id="document-change-events">Document change events<a class="headerlink" href="#document-change-events" title="Permanent link"></a></h2>
<p>You can register for document changes. The following example registers for changes to the document with ID <code>user.john</code>
and prints the <code>verified_account</code> property when a change is detected.</p>
<div class="admonition example">
<p class="admonition-title">Example 9. Document change events</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">collection</span><span class="p">.</span><span class="na">addDocumentChangeListener</span><span class="p">(</span><span class="s">&quot;user.john&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="n">change</span><span class="p">.</span><span class="na">documentID</span><span class="p">)</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Status: </span><span class="si">${</span><span class="nb">it</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;</span><span class="n">verified_account</span><span class="s">&quot;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="using-kotlin-flows">Using Kotlin Flows<a class="headerlink" href="#using-kotlin-flows" title="Permanent link"></a></h3>
<p>Kotlin users can also take advantage of <code>Flow</code>s to monitor for changes.</p>
<p>The following methods show how to watch for document changes in a given collection or for changes to a specific document.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Collection Changes</label><label for="__tabbed_1_2">Document Changes</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">collChanges</span><span class="p">:</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collection</span><span class="p">.</span><span class="na">collectionChangeFlow</span><span class="p">()</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">documentIDs</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">docChanges</span><span class="p">:</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">DocumentChange</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collection</span><span class="p">.</span><span class="na">documentChangeFlow</span><span class="p">(</span><span class="s">&quot;1001&quot;</span><span class="p">)</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="p">.</span><span class="na">mapNotNull</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">        </span><span class="n">change</span><span class="p">.</span><span class="na">takeUnless</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">            </span><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="nb">it</span><span class="p">.</span><span class="na">documentID</span><span class="p">)</span><span class="o">?.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;owner&quot;</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="document-expiration">Document Expiration<a class="headerlink" href="#document-expiration" title="Permanent link"></a></h2>
<p>Document expiration allows users to set the expiration date for a document. When the document expires, it is purged from
the database. The purge is not replicated to Sync Gateway.</p>
<div class="admonition example">
<p class="admonition-title">Example 10. Set document expiration</p>
<p>This example sets the TTL for a document to 1 day from the current time.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1">// Purge the document one day from now</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">collection</span><span class="p">.</span><span class="na">setDocumentExpiration</span><span class="p">(</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="s">&quot;doc123&quot;</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="n">Clock</span><span class="p">.</span><span class="na">System</span><span class="p">.</span><span class="na">now</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1.</span><span class="n">days</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="p">)</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1">// Reset expiration</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="n">collection</span><span class="p">.</span><span class="na">setDocumentExpiration</span><span class="p">(</span><span class="s">&quot;doc1&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="c1">// Query documents that will be expired in less than five minutes</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="kd">val</span><span class="w"> </span><span class="nv">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QueryBuilder</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">    </span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="n">SelectResult</span><span class="p">.</span><span class="na">expression</span><span class="p">(</span><span class="n">Meta</span><span class="p">.</span><span class="na">id</span><span class="p">))</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">DataSource</span><span class="p">.</span><span class="na">collection</span><span class="p">(</span><span class="n">collection</span><span class="p">))</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="p">.</span><span class="na">where</span><span class="p">(</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">        </span><span class="n">Meta</span><span class="p">.</span><span class="na">expiration</span><span class="p">.</span><span class="na">lessThan</span><span class="p">(</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">            </span><span class="n">Expression</span><span class="p">.</span><span class="na">longValue</span><span class="p">((</span><span class="n">Clock</span><span class="p">.</span><span class="na">System</span><span class="p">.</span><span class="na">now</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">5.</span><span class="n">minutes</span><span class="p">).</span><span class="na">toEpochMilliseconds</span><span class="p">())</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">    </span><span class="p">)</span>
</span></code></pre></div>
</div>
<h2 id="document-constraints">Document Constraints<a class="headerlink" href="#document-constraints" title="Permanent link"></a></h2>
<p>Couchbase Lite APIs do not explicitly disallow the use of attributes with the underscore prefix at the top level of
document. This is to facilitate the creation of documents for use either in <em>local only</em> mode where documents are not
synced, or when used exclusively in peer-to-peer sync.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>"_id", :"_rev" and "_sequence" are reserved keywords and must not be used as top-level attributes â€” see <a href="#example-11">Example 
11</a>.</p>
</div>
<p>Users are cautioned that any attempt to sync such documents to Sync Gateway will result in an error. To be future-proof,
you are advised to avoid creating such documents. Use of these attributes for user-level data may result in undefined
system behavior.</p>
<p>For more guidance â€” see <a href="https://docs.couchbase.com/sync-gateway/current/data-modeling.html">Sync Gateway - data modeling guidelines</a></p>
<div class="admonition example">
<p class="admonition-title"><span id='example-11'>Example 11. Reserved Keys List</span></p>
<ul>
<li>_attachments</li>
<li>_deleted <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li>_id <sup id="fnref2:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li>_removed</li>
<li>_rev <sup id="fnref3:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li>_sequence</li>
</ul>
</div>
<h2 id="working-with-json-data">Working with JSON Data<a class="headerlink" href="#working-with-json-data" title="Permanent link"></a></h2>
<p><strong>In this section</strong><br />
<a href="#arrays">Arrays</a> | <a href="#blobs">Blobs</a> | <a href="#dictionaries">Dictionaries</a> | <a href="#documents">Documents</a> | <a href="#query-results-as-json">Query Results as
JSON</a></p>
<p>The <code>toJSON()</code> typed-accessor means you can easily work with JSON data, native and Couchbase Lite objects.</p>
<h3 id="arrays">Arrays<a class="headerlink" href="#arrays" title="Permanent link"></a></h3>
<p>Convert an <code>Array</code> to and from JSON using the <a href="/api/couchbase-lite-ee/kotbase/-array/to-j-s-o-n.html"><code>toJSON()</code></a> and
<a href="/api/couchbase-lite-ee/kotbase/-array/to-list.html"><code>toList()</code></a> methods â€” see <a href="#example-12">Example 12</a>.</p>
<p>Additionally, you can:</p>
<ul>
<li>Initialize a <code>MutableArray</code> using data supplied as a JSON string. This is done using the
  <a href="/api/couchbase-lite-ee/kotbase/-mutable-array/-mutable-array.html"><code>MutableArray(json: String)</code></a> constructor â€” see
  <a href="#example-12">Example 12</a>.</li>
<li>Set data with a JSON string using <a href="/api/couchbase-lite-ee/kotbase/-mutable-array/set-j-s-o-n.html"><code>setJSON()</code></a>.</li>
</ul>
<div class="admonition example">
<p class="admonition-title"><span id='example-12'>Example 12. Arrays as JSON strings</span></p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">// JSON String -- an Array (3 elements. including embedded arrays)</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">jsonString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;[{&quot;id&quot;:&quot;1000&quot;,&quot;type&quot;:&quot;hotel&quot;,&quot;name&quot;:&quot;Hotel Ted&quot;,&quot;city&quot;:&quot;Paris&quot;,&quot;country&quot;:&quot;France&quot;,&quot;description&quot;:&quot;Undefined description for Hotel Ted&quot;},{&quot;id&quot;:&quot;1001&quot;,&quot;type&quot;:&quot;hotel&quot;,&quot;name&quot;:&quot;Hotel Fred&quot;,&quot;city&quot;:&quot;London&quot;,&quot;country&quot;:&quot;England&quot;,&quot;description&quot;:&quot;Undefined description for Hotel Fred&quot;},{&quot;id&quot;:&quot;1002&quot;,&quot;type&quot;:&quot;hotel&quot;,&quot;name&quot;:&quot;Hotel Ned&quot;,&quot;city&quot;:&quot;Balmain&quot;,&quot;country&quot;:&quot;Australia&quot;,&quot;description&quot;:&quot;Undefined description for Hotel Ned&quot;,&quot;features&quot;:[&quot;Cable TV&quot;,&quot;Toaster&quot;,&quot;Microwave&quot;]}]&quot;&quot;&quot;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="c1">// initialize array from JSON string</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableArray</span><span class="p">(</span><span class="n">jsonString</span><span class="p">)</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="c1">// Create and save new document using the array</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">..</span><span class="o">&lt;</span><span class="w"> </span><span class="n">mArray</span><span class="p">.</span><span class="na">count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="n">mArray</span><span class="p">.</span><span class="na">getDictionary</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">?.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">getString</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="s">&quot;unknown&quot;</span><span class="p">)</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">        </span><span class="n">collection</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">MutableDocument</span><span class="p">(</span><span class="n">getString</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">toMap</span><span class="p">()))</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="p">}</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="c1">// Get an array from the document as a JSON string</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="s">&quot;1002&quot;</span><span class="p">)</span><span class="o">?.</span><span class="na">getArray</span><span class="p">(</span><span class="s">&quot;features&quot;</span><span class="p">)</span><span class="o">?.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="w">    </span><span class="c1">// Print its elements</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">feature</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">toList</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$</span><span class="n">feature</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">toJSON</span><span class="p">())</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="blobs">Blobs<a class="headerlink" href="#blobs" title="Permanent link"></a></h3>
<p>Convert a <code>Blob</code> to JSON using the <a href="/api/couchbase-lite-ee/kotbase/-blob/to-j-s-o-n.html"><code>toJSON()</code></a> method â€” see
<a href="#example-13">Example 13</a>.</p>
<p>You can use <a href="/api/couchbase-lite-ee/kotbase/-blob/-companion/is-blob.html"><code>isBlob()</code></a> to check whether a given
dictionary object is a blob or not â€” see <a href="#example-13">Example 13</a>.</p>
<p>Note that the blob object must first be saved to the database (generating the required metadata) before you can use the
<a href="/api/couchbase-lite-ee/kotbase/-blob/to-j-s-o-n.html"><code>toJSON()</code></a> method.</p>
<div class="admonition example">
<p class="admonition-title"><span id='example-13'>Example 13. Blobs as JSON strings</span></p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">thisBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collection</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="s">&quot;thisdoc-id&quot;</span><span class="p">)</span><span class="o">!!</span><span class="p">.</span><span class="na">toMap</span><span class="p">()</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Blob</span><span class="p">.</span><span class="na">isBlob</span><span class="p">(</span><span class="n">thisBlob</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">    </span><span class="k">return</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="p">}</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">blobType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thisBlob</span><span class="o">[</span><span class="s">&quot;content_type&quot;</span><span class="o">]</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">blobLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thisBlob</span><span class="o">[</span><span class="s">&quot;length&quot;</span><span class="o">]</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Number?</span>
</span></code></pre></div>
</div>
<p>See also: <a href="../blobs/">Blobs</a></p>
<h3 id="dictionaries">Dictionaries<a class="headerlink" href="#dictionaries" title="Permanent link"></a></h3>
<p>Convert a <code>Dictionary</code> to and from JSON using the <a href="/api/couchbase-lite-ee/kotbase/-dictionary/to-j-s-o-n.html"><code>toJSON()</code></a> and <a href="/api/couchbase-lite-ee/kotbase/-dictionary/to-map.html"><code>toMap()</code></a> methods â€” see <a href="#example-14">Example 14</a>.</p>
<p>Additionally, you can:</p>
<ul>
<li>Initialize a <code>MutableDictionary</code> using data supplied as a JSON string. This is done using the
  <a href="/api/couchbase-lite-ee/kotbase/-mutable-dictionary/-mutable-dictionary.html"><code>MutableDictionary(json: String)</code></a>
  constructor â€” see <a href="#example-14">Example 14</a>.</li>
<li>Set data with a JSON string using <a href="/api/couchbase-lite-ee/kotbase/-mutable-dictionary/set-j-s-o-n.html"><code>setJSON()</code></a>.</li>
</ul>
<div class="admonition example">
<p class="admonition-title"><span id='example-14'>Example 14. Dictionaries as JSON strings</span></p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">jsonString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;{&quot;id&quot;:&quot;1002&quot;,&quot;type&quot;:&quot;hotel&quot;,&quot;name&quot;:&quot;Hotel Ned&quot;,&quot;city&quot;:&quot;Balmain&quot;,&quot;country&quot;:&quot;Australia&quot;,&quot;description&quot;:&quot;Undefined description for Hotel Ned&quot;,&quot;features&quot;:[&quot;Cable TV&quot;,&quot;Toaster&quot;,&quot;Microwave&quot;]}&quot;&quot;&quot;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">mDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDictionary</span><span class="p">(</span><span class="n">jsonString</span><span class="p">)</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$</span><span class="n">mDict</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="n">println</span><span class="p">(</span><span class="s">&quot;Details for: </span><span class="si">${</span><span class="n">mDict</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;</span><span class="n">name</span><span class="s">&quot;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="n">mDict</span><span class="p">.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; =&gt; &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mDict</span><span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="documents">Documents<a class="headerlink" href="#documents" title="Permanent link"></a></h3>
<p>Convert a <code>Document</code> to and from JSON strings using the <a href="/api/couchbase-lite-ee/kotbase/-document/to-j-s-o-n.html"><code>toJSON()</code></a> and <a href="/api/couchbase-lite-ee/kotbase/-document/to-map.html"><code>toMap()</code></a> methods â€” see <a href="#example-15">Example 15</a>.</p>
<p>Additionally, you can:</p>
<ul>
<li>Initialize a <code>MutableDocument</code> using data supplied as a JSON string. This is done using the
  <a href="/api/couchbase-lite-ee/kotbase/-mutable-document/-mutable-document.html"><code>MutableDocument(id: String?, json: String)</code></a> constructor â€” see <a href="#example-15">Example 15</a>.</li>
<li>Set data with a JSON string using <a href="/api/couchbase-lite-ee/kotbase/-mutable-document/set-j-s-o-n.html"><code>setJSON()</code></a>.</li>
</ul>
<div class="admonition example">
<p class="admonition-title"><span id='example-15'>Example 15. Documents as JSON strings</span></p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">QueryBuilder</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="n">SelectResult</span><span class="p">.</span><span class="na">expression</span><span class="p">(</span><span class="n">Meta</span><span class="p">.</span><span class="na">id</span><span class="p">).</span><span class="n">`as`</span><span class="p">(</span><span class="s">&quot;metaId&quot;</span><span class="p">))</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">DataSource</span><span class="p">.</span><span class="na">collection</span><span class="p">(</span><span class="n">srcColl</span><span class="p">))</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="nb">it</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;metaId&quot;</span><span class="p">)</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">thisId</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">            </span><span class="n">srcColl</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="n">thisId</span><span class="p">)</span><span class="o">?.</span><span class="na">toJSON</span><span class="p">()</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">                </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;JSON String = </span><span class="si">$</span><span class="n">json</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">                </span><span class="kd">val</span><span class="w"> </span><span class="nv">hotelFromJSON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableDocument</span><span class="p">(</span><span class="n">thisId</span><span class="p">,</span><span class="w"> </span><span class="n">json</span><span class="p">)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">                </span><span class="n">dstColl</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">hotelFromJSON</span><span class="p">)</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">                </span><span class="n">dstColl</span><span class="p">.</span><span class="na">getDocument</span><span class="p">(</span><span class="n">thisId</span><span class="p">)</span><span class="o">?.</span><span class="na">toMap</span><span class="p">()</span><span class="o">?.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">${</span><span class="n">e</span><span class="p">.</span><span class="na">key</span><span class="si">}</span><span class="s"> =&gt; </span><span class="si">${</span><span class="n">e</span><span class="p">.</span><span class="na">value</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="query-results-as-json">Query Results as JSON<a class="headerlink" href="#query-results-as-json" title="Permanent link"></a></h3>
<p>Convert a query <code>Result</code> to a JSON string using its <a href="/api/couchbase-lite-ee/kotbase/-result/to-j-s-o-n.html"><code>toJSON()</code></a> accessor method. The JSON string can easily be serialized or
used as required in your application. See <a href="#example-16">Example 16</a> for a working example using <a href="https://github.com/Kotlin/kotlinx.serialization">kotlinx-serialization</a>.</p>
<div class="admonition example">
<p class="admonition-title"><span id='example-16'>Example 16. Using JSON Results</span></p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1">// Uses kotlinx-serialization JSON processor</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="nd">@Serializable</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Hotel</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">type</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">hotels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="o">&lt;</span><span class="n">Hotel</span><span class="o">&gt;</span><span class="p">()</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="kd">val</span><span class="w"> </span><span class="nv">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QueryBuilder</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">    </span><span class="p">.</span><span class="na">select</span><span class="p">(</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">        </span><span class="n">SelectResult</span><span class="p">.</span><span class="na">expression</span><span class="p">(</span><span class="n">Meta</span><span class="p">.</span><span class="na">id</span><span class="p">),</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">        </span><span class="n">SelectResult</span><span class="p">.</span><span class="na">property</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">),</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">        </span><span class="n">SelectResult</span><span class="p">.</span><span class="na">property</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="w">    </span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">DataSource</span><span class="p">.</span><span class="na">collection</span><span class="p">(</span><span class="n">collection</span><span class="p">))</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="n">query</span><span class="p">.</span><span class="na">execute</span><span class="p">().</span><span class="na">use</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">    </span><span class="n">rs</span><span class="p">.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">        </span><span class="c1">// Get result as JSON string</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">toJSON</span><span class="p">()</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="w">        </span><span class="c1">// Get JsonObject map from JSON string</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">mapFromJsonString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">JsonObject</span><span class="o">&gt;</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="w">        </span><span class="c1">// Use created JsonObject map</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">hotelId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapFromJsonString</span><span class="o">[</span><span class="s">&quot;id&quot;</span><span class="o">]</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">hotelType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapFromJsonString</span><span class="o">[</span><span class="s">&quot;type&quot;</span><span class="o">]</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">hotelName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapFromJsonString</span><span class="o">[</span><span class="s">&quot;name&quot;</span><span class="o">]</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a><span class="w">        </span><span class="c1">// Get custom object from JSON string</span>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">hotel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Hotel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a><span class="w">        </span><span class="n">hotels</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">hotel</span><span class="p">)</span>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h4 id="json-string-format">JSON String Format<a class="headerlink" href="#json-string-format" title="Permanent link"></a></h4>
<p>If your query selects ALL then the JSON format will be:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>{
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>  database-name: {
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>    key1: &quot;value1&quot;,
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>    keyx: &quot;valuex&quot;
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>  }
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>}
</span></code></pre></div>
<p>If your query selects a sub-set of available properties then the JSON format will be:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>{
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>  key1: &quot;value1&quot;,
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>  keyx: &quot;valuex&quot;
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>}
</span></code></pre></div>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Any change to this reserved key will be detected when it is saved and will result in a Couchbase exception (Error
Code 5 â€” <code>CorruptRevisionData</code>)&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../scopes-and-collections/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Scopes and Collections">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Scopes and Collections
              </div>
            </div>
          </a>
        
        
          
          <a href="../blobs/" class="md-footer__link md-footer__link--next" aria-label="Next: Blobs">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Blobs
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 Jeff Lockhart
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/jeffdgr8" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/jeffdgr8" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/lockhartjeff/" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.06 2.06 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065m1.782 13.019H3.555V9h3.564zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.tabs.link", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "current", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>